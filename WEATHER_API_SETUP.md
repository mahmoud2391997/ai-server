# إعداد OpenWeather API للحصول على بيانات الطقس الحقيقية

## المشكلة الحالية
إذا كنت ترى بيانات وهمية (الرياض، 25°م، معتدل) فهذا يعني أن مفتاح OpenWeather API غير مُعد.

## خطوات الإعداد

### 1. الحصول على مفتاح API مجاني
1. اذهب إلى: https://openweathermap.org/api
2. سجل حساب جديد (مجاني)
3. بعد التسجيل، اذهب إلى "API keys" في حسابك
4. انسخ مفتاح API الخاص بك

### 2. إعداد متغير البيئة

#### الطريقة الأولى: إنشاء ملف `.env`
1. في مجلد `ai-server`، أنشئ ملف باسم `.env`
2. أضف السطر التالي:
   ```
   OPENWEATHER_API_KEY=your_actual_api_key_here
   ```
3. استبدل `your_actual_api_key_here` بمفتاح API الذي نسخته

#### الطريقة الثانية: تعيين متغير البيئة مباشرة
```bash
export OPENWEATHER_API_KEY=your_actual_api_key_here
```

### 3. إعادة تشغيل السيرفر
بعد إضافة مفتاح API، أعد تشغيل سيرفر FastAPI:
```bash
cd ai-server
source venv/bin/activate
python run.py
```

### 4. التحقق من العمل
بعد إعادة التشغيل:
- افتح المتصفح واذهب إلى صفحة AI Nose
- يجب أن ترى بيانات الطقس الحقيقية بناءً على موقعك
- إذا كان كل شيء يعمل، لن ترى رسالة "بيانات تجريبية"

## ملاحظات مهمة
- المفتاح المجاني يسمح بـ 60 طلب في الدقيقة
- البيانات الحقيقية تعتمد على موقعك الجغرافي (GPS)
- إذا رفضت السماح بالوصول للموقع، سيتم استخدام موقع افتراضي (الرياض)

## استكشاف الأخطاء

### إذا ظهرت رسالة "بيانات تجريبية":
1. تأكد من أن ملف `.env` موجود في مجلد `ai-server`
2. تأكد من أن مفتاح API صحيح
3. تأكد من إعادة تشغيل السيرفر بعد إضافة المفتاح
4. تحقق من سجلات السيرفر (console) لرؤية رسائل الخطأ

### إذا ظهر خطأ في API:
- تحقق من أن مفتاح API صحيح
- تحقق من أن حسابك نشط في OpenWeather
- تحقق من أنك لم تتجاوز حد الطلبات المجانية

